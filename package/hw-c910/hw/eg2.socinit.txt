# Set gdb environment
set height 0

# Don't confirm when quit
set confirm off

shell $(sleep 1)

# FPGA demultiplex
set *(unsigned int *) 0x1fbad008=0xff

# Load the debugging elf file
load
c

# L2PMP
set *(0x20000000 + 0x04020000 + 0x100) = 0x1fba4000 >> 12
set *(0x20000000 + 0x04020000 + 0x104) = 0x1fba5000 >> 12
set *(0x20000000 + 0x04020000 + 0x108) = 0x1fb10000 >> 12
set *(0x20000000 + 0x04020000 + 0x10c) = 0x1fb12000 >> 12
set *(0x20000000 + 0x04020000 + 0x110) = 0x20000000 >> 12
set *(0x20000000 + 0x04020000 + 0x114) = 0x24000000 >> 12
set *(0x20000000 + 0x04020000 + 0x118) = 0x24000000 >> 12
set *(0x20000000 + 0x04020000 + 0x11c) = 0x24010000 >> 12
set *(0x20000000 + 0x04020000 + 0x120) = 0xc0000000 >> 12
set *(0x20000000 + 0x04020000 + 0x124) = 0x100000000 >> 12

set *(0x20000000 + 0x04020000 + 0x000) = 0b11000011110000111100001111000011
set *(0x20000000 + 0x04020000 + 0x004) = 0b11000111

set *(0x20000000 + 0x04020000 + 0x020) = 0b11000000

set $msmpr = 1

disp /i $pc
q
